{"mappings":"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","sources":["src/js/ls-service.js","src/js/favorite-add-btn.js"],"sourcesContent":["const save = (key, value) => {\n  try {\n    const serializedState = JSON.stringify(value);\n    localStorage.setItem(key, serializedState);\n  } catch (error) {\n    console.error('Set state error: ', error.message);\n  }\n};\n\nconst load = key => {\n  try {\n    const serializedState = localStorage.getItem(key);\n    return serializedState === null ? undefined : JSON.parse(serializedState);\n  } catch (error) {\n    console.error('Get state error: ', error.message);\n  }\n};\n\nconst remove = key => {\n  try {\n    localStorage.removeItem(key);\n  } catch (error) {\n    console.error('Get state error: ', error.message);\n  }\n};\n\nexport { save, load, remove };\n","import formatDate from './news-date';\nimport { checkPresentArticleInLS, onNewsListClick } from './read-news';\nimport { load, save } from './ls-service';\n\nconst newsList = document.querySelector('.news__list');\nconst readNewsList = document.querySelector('.read-news__list');\n\n// newsList.addEventListener('click', onFavoriteBtnClick);\n\nnewsList ? newsList.addEventListener('click', onFavoriteBtnClick) : null; /////////////////////////\nreadNewsList\n  ? readNewsList.addEventListener('click', onFavoriteBtnClick)\n  : null; /////////////////////////\n\nconst STORAGE_KEY = 'favoriteNews';\nlet favoriteNewsData = [];\n\nif (load(STORAGE_KEY)) {\n  favoriteNewsData = load(STORAGE_KEY);\n}\n\nfunction onFavoriteBtnClick(e) {\n  if (!e.target.classList.contains('target') && e.target.nodeName !== 'use') {\n    return;\n  }\n\n  const favoriteArticleRef = e.target.closest('.article');\n\n  switch (e.target.nodeName) {\n    case 'SPAN':\n      addClassToFavoriteBtn(e.target.parentNode, favoriteArticleRef);\n      break;\n\n    case 'BUTTON':\n      addClassToFavoriteBtn(e.target, favoriteArticleRef);\n      break;\n\n    default:\n      addClassToFavoriteBtn(e.target.parentNode.parentNode, favoriteArticleRef);\n      break;\n  }\n}\n\nfunction addClassToFavoriteBtn(name, favoriteArticleRef) {\n  if (name.classList.contains('article__btn-favorite')) {\n    name.classList.remove('article__btn-favorite');\n    name.firstElementChild.textContent = 'Add to favorite';\n    removeItemFromLocalStorage(favoriteArticleRef);\n  } else {\n    name.classList.add('article__btn-favorite');\n    name.firstElementChild.textContent = 'Remove from favorite';\n    addItemToLocalStorage(favoriteArticleRef);\n  }\n}\n\nfunction addItemToLocalStorage(favoriteArticleRef) {\n  try {\n    const data = {\n      articleHeader:\n        favoriteArticleRef.querySelector('.article__header').textContent,\n      imgSrc: favoriteArticleRef.querySelector('img').src,\n      imgAlt: favoriteArticleRef.querySelector('img').alt,\n      description: favoriteArticleRef.querySelector('.article__subheader')\n        .textContent,\n      date: favoriteArticleRef.querySelector('.article__date').textContent,\n      linkReadMore: favoriteArticleRef.querySelector('.article__readmore-link')\n        .href,\n      newsCategory: favoriteArticleRef.querySelector('.article__category-label')\n        .textContent,\n    };\n\n    for (let i = 0; i < favoriteNewsData.length; i++) {\n      if (\n        favoriteNewsData[i].linkReadMore ===\n        favoriteArticleRef.querySelector('.article__readmore-link').href\n      ) {\n        return;\n      }\n    }\n\n    favoriteNewsData.push(data);\n\n    const serializedState = JSON.stringify(favoriteNewsData);\n    localStorage.setItem(STORAGE_KEY, serializedState);\n  } catch (error) {\n    console.error('Set state error: ', error.message);\n  }\n}\n\nexport function removeItemFromLocalStorage(favoriteArticleRef) {\n  for (let i = 0; i < favoriteNewsData.length; i++) {\n    if (\n      favoriteNewsData[i].linkReadMore ===\n      favoriteArticleRef.querySelector('.article__readmore-link').href\n    ) {\n      favoriteNewsData.splice(i, 1);\n      save(STORAGE_KEY, favoriteNewsData);\n    }\n  }\n}\n\nexport default function alreadyFavorite(\n  imageUrl,\n  imageCaption,\n  section,\n  iconSprite,\n  title,\n  abstract,\n  url,\n  published_date\n) {\n  for (let i = 0; i < favoriteNewsData.length; i++) {\n    if (favoriteNewsData[i].linkReadMore === url) {\n      ////////////////////////////////////////////////////////////////////////ny Katya\n      // changed <div class=\"article\"> to div class=\"article ${checkPresentArticleInLS(url) ? 'read' : ''}\"> and added target=\"_blank to article\"\n      return `<li class=\"news__card-item\">\n       <div class=\"article ${checkPresentArticleInLS(url) ? 'read' : ''}\">\n      <div class=\"article__image_wrapper\">        \n        <img\n          src=\"${imageUrl}\"\n          alt=\"${imageCaption}\"\n        />        \n        <div class=\"article__category-label\">${section}</div>\n        <button class=\"article__btn target article__btn-favorite\" type=\"button\">\n          <span class=\"article__btn-text target\">Remove from favorite</span>\n          <svg class=\"article__heart-icon target\" width=\"16\" height=\"16\">\n            <use href=\"${iconSprite + '#heart-like'}\"></use>\n          </svg>\n        </button>\n      </div>\n  \n      <div class=\"article__content\">\n        <h2 class=\"article__header\">${title}</h2>\n        <p class=\"article__subheader\">${abstract}</p>\n        <div class=\"article__footer\">\n          <p class=\"article__date\">${formatDate(published_date)}</p>\n          <a \n            class=\"article__readmore-link link-unstyled\"\n            href=\"${url}\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer nofollow\"\n            >Read more</a\n          >\n        </div>\n      </div>\n    </div>\n  </li>`;\n    }\n  }\n\n  ////////////////////////////////////////////////////////////////////////by Katya\n  // changed <div class=\"article\"> to div class=\"article ${checkPresentArticleInLS(url) ? 'read' : ''}\"> and added target=\"_blank to article\"\n  return `<li class=\"news__card-item\">\n    <div class=\"article ${checkPresentArticleInLS(url) ? 'read' : ''}\">\n      <div class=\"article__image_wrapper\">        \n        <img\n          src=\"${imageUrl}\"\n          alt=\"${imageCaption}\"\n        />        \n        <div class=\"article__category-label\">${section}</div>\n        <button class=\"article__btn target\" type=\"button\">\n          <span class=\"article__btn-text target\">Add to favorite</span>\n          <svg class=\"article__heart-icon target\" width=\"16\" height=\"16\">\n            <use href=\"${iconSprite + '#heart-like'}\"></use>\n          </svg>\n        </button>\n      </div>\n  \n      <div class=\"article__content\">\n        <h2 class=\"article__header\">${title}</h2>\n        <p class=\"article__subheader\">${abstract}</p>\n        <div class=\"article__footer\">\n          <p class=\"article__date\">${formatDate(published_date)}</p>\n          <a\n            class=\"article__readmore-link link-unstyled\"\n            href=\"${url}\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer nofollow\"\n            >Read more</a\n          >\n        </div>\n      </div>\n    </div>\n  </li>`;\n}\n"],"names":["$234f6497f17a490a$export$a1544dad697b423d","key","value","serializedState","JSON","stringify","localStorage","setItem","error","console","message","$234f6497f17a490a$export$11e63f7b0f3d9900","getItem","undefined","parse","$gbmcQ","parcelRequire","$f3d5402944c7c7d0$var$newsList","document","querySelector","$f3d5402944c7c7d0$var$readNewsList","addEventListener","$f3d5402944c7c7d0$var$onFavoriteBtnClick","$f3d5402944c7c7d0$var$STORAGE_KEY","$f3d5402944c7c7d0$var$favoriteNewsData","e","target","classList","contains","nodeName","favoriteArticleRef","closest","$f3d5402944c7c7d0$var$addClassToFavoriteBtn","parentNode","name","remove","firstElementChild","textContent","$f3d5402944c7c7d0$export$78175d29db0a70bc","add","data","articleHeader","imgSrc","src","imgAlt","alt","description","date","linkReadMore","href","newsCategory","i","length","push","$f3d5402944c7c7d0$var$addItemToLocalStorage","splice","$31XcY","save","$f3d5402944c7c7d0$export$2e2bcd8739ae039","imageUrl","imageCaption","section","iconSprite","title","abstract","url","published_date","concat","$gUYrH","checkPresentArticleInLS","default","load"],"version":3,"file":"favorite.d751c6fa.js.map"}